Paiza　B138　

あなたは、「ドーナツの絵」が大好きです。

「ドーナツの絵」とは以下のように、中心のマスが白、それを囲む 8 マスが黒である 3 × 3 の模様を指します。
なお、"." はそのマスが白であることを表し、"#" はそのマスが黒であることを表します。
###
#.#
###
あくまで上記のような 3 × 3 の模様を「ドーナツの絵」と言うのであり、以下のような模様は「ドーナツの絵」ではないことに注意してください。
    ####    #####   ######
    #..#    #...#   ######
    #..#    #...#   ##..##
    ####    #...#   ##..##
            #####   ######
                    ######
あなたは、地上絵を見に来ました。
地上絵の模様が与えられるので、「ドーナツの絵」がいくつ含まれているか数え上げるプログラムを作成してください。

```
評価ポイント
10回のテストケースで、正答率、実行速度、メモリ消費量をはかり得点が決まります。
より早い解答時間で提出したほうが得点が高くなります。
複数のテストケースで正しい出力がされるか評価（+50点）
解答までの速さ評価（+50点）
入力される値
入力は以下のフォーマットで与えられます。
```
```
H W
s_1
s_2
...
s_H
```
```
・1 行目にそれぞれ地上絵の縦方向のマス数、横方向のマス数を表す整数 H, W がこの順で半角スペース区切りで与えられます。
・続く H 行のうちの i 行目 (1 ≦ i ≦ H) には半角記号 "." および "#" からなる長さ W の文字列 s_i が与えられます。s_i の j 番目 (1 ≦ j ≦ W) の文字は地上絵における i 行 j 列目のマスの色を表します。
・入力は合計で H + 1 行となり、入力値最終行の末尾に改行が 1 つ入ります。

それぞれの値は文字列で標準入力から渡されます。標準入力からの値取得方法はこちらをご確認ください
期待する出力
地上絵に含まれる「ドーナツの絵」の数を整数で出力してください。
末尾に改行を入れ、余計な文字、空行を含んではいけません。

条件
すべてのテストケースにおいて、以下の条件をみたします。

・3 ≦ H ≦ 100
・3 ≦ W ≦ 100
・s_i は半角記号"#", "."のいずれかで構成される長さ W の文字列 (1 ≦ i ≦ H)
```
```
入力例1
5 5
####.
#.###
###.#
#.###
###.#
```
```
出力例1
3
```
```
入力例2
6 4
####
#..#
#..#
####
#.##
####
```
```
出力例2
1
```
--------

```
h, w = gets.split.map(&:to_i)
grid = h.times.map { gets.chomp }

count = 0
(1..h-2).each do |i|
  (1..w-2).each do |j|
    donut = grid[i-1][j-1,3] + grid[i][j-1,3] + grid[i+1][j-1,3]
    count += 1 if donut == '###' + '#.#' + '###'
  end
end

puts count
```
```
h, w = gets.split.map(&:to_i)
```
最初の行の最初の行から高さ h と幅 w を読み込む

gets.split で入力を分割し、map(&:to_i) で整数に変換

※
```
.split

この文字列メソッドは、文字列を空白文字で分割し、配列を返す
上記の例では、"5 5\n".split は ["5", "5"] という配列を返す
```
```
.map(&:to_i)

map メソッドは配列の各要素に対して指定した処理を行い、新しい配列を返す
&:to_i は { |x| x.to_i } の短縮形で、各要素を整数に変換
上記の例では、["5", "5"].map(&:to_i) は [5, 5] という整数の配列を返す
```

```
grid = h.times.map { gets.chomp }
```
h 回繰り返して各行を読み込み、2次元配列 grid を作成する
```
grid を使って地上絵の各3x3領域を効率的に抽出し、「ドーナツの絵」パターンと比較
grid は地上絵のデータ構造として機能し、効率的なパターン検索と全体的な問題解決を可能にする重要な役割を果たしている
```

chomp は各行末の改行を削除し

```
rubyCopycount = 0
```

ドーナツの絵の数を数えるカウンターを初期化

```
グリッドのスキャン:
rubyCopy(1..h-2).each do |i|
  (1..w-2).each do |j|
```

グリッドの各3x3領域をスキャン

端を除いてスキャンするため、範囲は 1 から h-2 と w-2 まで

```
ドーナツパターンの抽出:
rubyCopydonut = grid[i-1][j-1,3] + grid[i][j-1,3] + grid[i+1][j-1,3]
```

現在の位置を中心とする3x3領域を文字列として抽出

grid[i][j-1,3] は i 行目の j-1 列目から3文字を取得する

```
パターンの比較とカウント:
rubyCopycount += 1 if donut == '###' + '#.#' + '###'
```

抽出したパターンがドーナツの絵と一致するかチェック

一致すれば count を1増やす

```
結果の出力:
puts count
```
